# A、B

没啥好说的，直接模拟

# C

根据定义，环状图的充分必要条件一定是： $ N=M $ 、每个节点度数为2、只有一个连通块。

直接判定即可

# D

因为每个动物至少要被看两次，那么相当于每个动物园拜访的次数的上限是2，因为超过2次就没意义了。

所以每个动物园的决策一共有三种，看0、1、2次。由于 $ N $ 不超过10,那么可以暴力枚举10位的三进制数来表示各动物园的决策，接下来判定合法性和最优解即可。

# E

如果 $ A[i]=1 $ 那么这个碗必然会发生移动。 $ A[i]=0 $ 的情况下可能会发生移动。

进一步我们发现，如果 $ i $ 能移动到 $ j $ ，如果 $ A[j]=1 $ ，那么相当于 $ A[i] $ 这个碗需要一次额外的移动，如果 $ A[j]=0 $ ，则需要的移动次数等于 $ j $ 的移动次数+1。

因此能写出如下DP。

设 $ dp[i] $ 表示把 $ i $ 移动到0位置，需要的额外移动次数。

则有 $ dp[i]=min\{dp[j]+1[a[j]=0], 1[a[j]=1]\} $ 

直接DP即可

# F

概率DP一个经典的做法是把局面倒过来做。

设 $ dp[i][j] $ 表示剩下 $ i $ 轮，至少需要命中 $ j $ 次的获胜概率。显然 $ dp[i][0]=1 $ 。

接下来我们考虑第 $ i $ 轮的决策，那么显然是在 $ 1...N $ 这些按键中分配一个 $ cnt[x] $ 表示按键 $ x $ 的按下次数，且 $ \sum_{x=1}^N cnt[x]=M $ 。

如果 $ x $ 是获胜键，那么对应的局面就是 $ dp[i-1][j-cnt[x]] $ 。由于每一轮都是独立实验，那么这一局面的转移概率是 $ 1/N $ 。

所以有 $ dp[i][j]= max_{\sum_{x=1}^N cnt[x]=M} \frac{1}{N} dp[i-1][j-cnt[x]] $ 

相当于做一个 $ O(NM^2) $ 的完全背包，但是 $ N $ 有点大。

因为 $ M $ 远小于 $ N $ ，且局面仅根 $ cnt[x] $ 相关，即不同按键的相同决策，转移是相同的。

不妨考虑只将 $ cnt[x] $ 的非0值，这样相当于物品降低为 $ M $ 个，接下来枚举 $ cnt[x]\neq 0 $ 的数量即可转移。

这样只需要做一个 $ O(M^3) $ 完全背包，再加上概率DP的 $ O(TK) $ 复杂度，一共是 $ O(M^3TK) $ 的总复杂度，足以通过。

# G

一个差分约束板子题。

首先看到区间和的限制，不难想到前缀和的减法。这样得到 $ M $ 条等式限制。

接下来由于 $ a[i]>0 $ ，那么 $ sum[i]-sum[i-1]\geq 1 $ 。

我们将 $ M $ 条等式限制转化为 $ 2M $ 条不等式( $ a=b $ 变成 $ a\geq b, a\leq b $ )，根据 $ \geq $ 号来建边，即求最长路。
